<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merchant Delivery Simulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
        }

        input,
        button {
            padding: 10px;
            margin: 10px 0;
            width: 100%;
            font-size: 16px;
        }

        #graph_image {
            margin-top: 20px;
            max-width: 100%;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <div class="container">
        <label for="start_node">Start Node (0–7):</label>
<input type="number" id="start_node" min="0" max="7" value="0">

<label for="end_node">End Node (0–7):</label>
<input type="number" id="end_node" min="0" max="7" value="7">

<button onclick="simulate()">Delivery Route</button>

        <img id="graph_image" src="" alt="Graph Image" />

        <div id="result" style="margin-top:20px; font-weight:bold;"></div>
    </div>


    <script>
        function simulate() {
    const startNode = parseInt(document.getElementById('start_node').value, 10);
    const endNode = parseInt(document.getElementById('end_node').value, 10);

    fetch('/simulate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ start_node: startNode, end_node: endNode })
    })
    .then(response => response.json())
    .then(data => {
        const img = document.getElementById('graph_image');
        img.src = data.image_url + '?t=' + new Date().getTime();

        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = `
            <strong>Starting Location:</strong> ${data.start_node} <br/>
            <strong>End Location:</strong> ${data.end_node} <br/>
            <strong>Total Time:</strong> ${data.total_time * 10} munites <br/>
            <strong>Total Delivery Cost:</strong> ${parseInt((data.total_time * 100) / 50)} Yuan <br/>
            <strong>Path:</strong> ${data.path.join(' ... ')}
        `;
    })
    .catch(error => {
        console.error('Error:', error);
        alert('An error occurred during simulation.');
    });
}


    </script>
</body>

</html>